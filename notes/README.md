# MiniMind-V æ”¹é€ æ–‡æ¡£ç´¢å¼•

æœ¬ç›®å½•åŒ…å«å°† MiniMind-V æ”¹é€ ä¸º Qwen3-0.6B + Cross-Attention Projector çš„å®Œæ•´æ–‡æ¡£ã€‚

## æ–‡æ¡£åˆ—è¡¨

### ğŸ“– [01_detailed_modification_guide.md](./01_detailed_modification_guide.md)

**è¯¦ç»†æŠ€æœ¯æŒ‡å—** - åŒ…å«æ‰€æœ‰ä»£ç ä¿®æ”¹çš„å…·ä½“ç»†èŠ‚

**å†…å®¹æ¦‚è§ˆ**:
- å½“å‰æ¶æ„åˆ†æ (MiniMind vs Qwen3-0.6B)
- è¯¦ç»†ä»£ç ä¿®æ”¹æ¸…å•:
  - VisionProj â†’ CrossAttentionProjector
  - MiniMindVLM ç±»ç»§æ‰¿æ”¹é€ 
  - è®­ç»ƒé€»è¾‘é€‚é…
- safetensors æ ¼å¼è¯¦è§£
- å…¼å®¹æ€§é—®é¢˜åˆ†æ
- å®æ–½é¡ºåºå»ºè®®
- å‚è€ƒæ–‡çŒ®å’Œä»£ç ç‰‡æ®µ

**é€‚ç”¨äººç¾¤**: éœ€è¦äº†è§£æŠ€æœ¯ç»†èŠ‚çš„å¼€å‘è€…

---

### ğŸ—ºï¸ [02_step_by_step_tutorial.md](./02_step_by_step_tutorial.md)

**é€æ­¥æ•™ç¨‹** - å¯è·Ÿéšæ“ä½œçš„å®Œæ•´æ•™å­¦

**å†…å®¹æ¦‚è§ˆ**:
- 8 ä¸ªé˜¶æ®µçš„æ“ä½œæ­¥éª¤:
  1. å‡†å¤‡å·¥ä½œéªŒè¯
  2. ä»£ç åŸºç¡€æ”¹é€ 
  3. Model Architecture ä¿®æ”¹
  4. è®­ç»ƒé€»è¾‘é€‚é…
  5. é¦–æ¬¡æµ‹è¯•è¿è¡Œ
  6. æ­£å¼è®­ç»ƒ
- **æ¯ä¸€æ­¥åŒ…å«**:
  - å¯ç›´æ¥è¿è¡Œçš„å‘½ä»¤
  - å¯å¤åˆ¶ç²˜è´´çš„ä»£ç 
  - **å¯èƒ½é‡åˆ°çš„é—®é¢˜**åˆ—è¡¨
  - **å¯è¡Œçš„è§£å†³æ–¹æ¡ˆ**
- æ•…éšœæ’æŸ¥æ±‡æ€»
- å¿«é€Ÿè¯Šæ–­è„šæœ¬

**é€‚ç”¨äººç¾¤**: éœ€è¦ä»é›¶å¼€å§‹å®æ–½çš„å¼€å‘è€…

---

## å¿«é€Ÿå¼€å§‹

### 1. æŸ¥çœ‹æ•™ç¨‹ç´¢å¼•
```bash
cd notes
ls -la
```

### 2. é˜…è¯»è¯¦ç»†æŠ€æœ¯æŒ‡å—
```bash
# æŸ¥çœ‹æ¶æ„åˆ†æ
cat 01_detailed_modification_guide.md | head -100

# æˆ–ç”¨ç¼–è¾‘å™¨æ‰“å¼€
code 01_detailed_modification_guide.md
```

### 3. è·Ÿéšé€æ­¥æ•™ç¨‹
```bash
# åˆ‡æ¢åˆ°æ•™ç¨‹æ–‡ä»¶
cat 02_step_by_step_tutorial.md | grep "é˜¶æ®µä¸€" -A 10

# è¿è¡Œç¬¬ä¸€ä¸ªæµ‹è¯•
cd notes
python test_qwen3_loading.py
```

---

## æ–‡æ¡£ä½¿ç”¨å»ºè®®

| åœºæ™¯ | æ¨èæ–‡æ¡£ |
|------|----------|
| åˆæ¬¡äº†è§£æ”¹é€ å†…å®¹ | å…ˆè¯» `01_detailed_modification_guide.md` çš„"å½“å‰æ¶æ„åˆ†æ"éƒ¨åˆ† |
| å¼€å§‹å®æ–½æ”¹é€  | æŒ‰é¡ºåºè·Ÿéš `02_step_by_step_tutorial.md` çš„æ¯ä¸ªé˜¶æ®µ |
| é‡åˆ°å…·ä½“é—®é¢˜ | æŸ¥çœ‹ `02_step_by_step_tutorial.md` çš„"æ•…éšœæ’æŸ¥æ±‡æ€»" |
| éœ€è¦æŠ€æœ¯æ·±å…¥ | å‚è€ƒ `01_detailed_modification_guide.md` çš„å…·ä½“ä»£ç ç»†èŠ‚ |

---

## å…³é”®æ–‡ä»¶ä¿®æ”¹æ¸…å•

å¿«é€Ÿäº†è§£éœ€è¦ä¿®æ”¹å“ªäº›æ–‡ä»¶ï¼š

| æ–‡ä»¶ | ä¿®æ”¹å†…å®¹ | é‡è¦ç¨‹åº¦ |
|------|----------|----------|
| `model/model_vlm.py` | VisionProjâ†’CrossAttention | â­â­â­ |
| `model/model_minimind.py` | VLMConfig å‚æ•°æ›´æ–° | â­â­ |
| `trainer/trainer_utils.py` | init_vlm_model åŠ è½½é€»è¾‘ | â­â­ |
| `trainer/train_pretrain_vlm.py` | è®­ç»ƒå‚æ•°è°ƒæ•´ | â­ |
| `trainer/train_sft_vlm.py` | è®­ç»ƒå‚æ•°è°ƒæ•´ | â­ |

---

## safetensors å¸¸è§é—®é¢˜

**Q: Qwen3 æ˜¯ safetensors æ ¼å¼ï¼Œèƒ½ç›´æ¥ç”¨äºè®­ç»ƒå—ï¼Ÿ**  
**A:** å¯ä»¥ï¼safetensors ä¸ PyTorch å®Œå…¨å…¼å®¹ï¼Œæ— éœ€è½¬æ¢ã€‚

**Q: å¦‚ä½•åŠ è½½ safetensors æƒé‡ï¼Ÿ**  
**A:** å‚è§æ•™ç¨‹ "Step 1.3: éªŒè¯ safetensors æ¥å£"

**Q:è®­ç»ƒåå¯ä»¥ä¿å­˜ä¸º safetensors å—ï¼Ÿ**  
**A:** å¯ä»¥ï¼Œä½¿ç”¨ `from safetensors.torch import save_file`

è¯¦è§ `01_detailed_modification_guide.md` çš„ "ä¸‰ã€safetensors æ ¼å¼è¯¦è§£"

---

## è¯Šæ–­æ£€æŸ¥

è¿è¡Œå¿«é€Ÿè¯Šæ–­è„šæœ¬ç¡®è®¤ç¯å¢ƒ:

```bash
cd notes
python diagnose.py  # åˆ›å»ºå¹¶è¿è¡Œæ•™ç¨‹ä¸­çš„è¯Šæ–­è„šæœ¬
```

---

## æ”¯æŒä¸åé¦ˆ

å¦‚é‡åˆ°æ•™ç¨‹ä¸­æœªæ¶µç›–çš„é—®é¢˜ï¼š

1. æ£€æŸ¥ `02_step_by_step_tutorial.md` çš„"æ•…éšœæ’æŸ¥æ±‡æ€»"
2. æŸ¥é˜… `01_detailed_modification_guide.md` çš„"å››ã€å¯èƒ½çš„å…¼å®¹æ€§é—®é¢˜"
3. è¿è¡Œè¯Šæ–­è„šæœ¬å®šä½é—®é¢˜

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**æœ€åæ›´æ–°**: 2025-02-13  
**é€‚ç”¨ç‰ˆæœ¬**: minimind-v + Qwen3-0.6B-Think
